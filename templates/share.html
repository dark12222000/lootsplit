<div id="noPrint" print-remove>
  <span ng-init="prepareExport()"></span>
  <div class="row">
    <div class="col-md-12">
      <div class="pull-left">
        <form action="" class="form-inline">
          <button class="btn btn-default" type="button" ng-click="print()">Print</button>
          <div class="form-group share-option">
            <input type="checkbox" id="indexPage" name="indexPage" ng-model="indexPage" class="form-control">
            <label for="indexPage">Index Page</label>
          </div>
          <div class="form-group share-option">
            <input type="checkbox" id="charPages" name="charPages" ng-model="charPages" class="form-control">
            <label for="charPages">Character Pages</label>
          </div>
          <div class="form-group share-option">
            <input type="checkbox" id="sepPages" name="sepPages" ng-model="sepPages" class="form-control">
            <label for="sepPages">Seperate Pages per Character</label>
          </div>
        </form>
      </div>
    </div>
  </div>

</div>
<div id="print" print-section print-only>
  <div ng-if="indexPage">
    <h1>Loot Split</h1>
    <p>Total Loot: {{LootService.lootTotal | coins}}</p>
    <p>Share Per Character: {{LootService.lootPerChar | coins}}</p>
    <p>Average Difference: {{LootService.avgCharacterDifference | coins}}</p>
    <table class="table">
      <thead>
        <td>Player</td>
        <td>Total</td>
        <td>Deviation</td>
      </thead>
      <tbody>
        <tr ng-repeat="char in characters">
          <td>{{char.name}}</td>
          <td>{{LootService.characterTotals[LootService.slugify(char.name)] | coins}}</td>
          <td>{{LootService.characterDifferences[LootService.slugify(char.name)] | coins}}</td>
        </tr>
      </tbody>
    </table>
    <hr>
    <h2 ng-if="LootService.lootCoins || LootService.lootPile.length">Remaining Loot</h2>
    <h3 ng-if="LootService.lootCoins">Currency {{LootService.lootCoins | coins}}</h3>
    <table class="table" ng-if="LootService.lootPile.length">
      <thead>
        <td>#</td>
        <td>Item</td>
        <td>Value</td>
        <td>Total Value</td>
      </thead>
      <tbody>
        <tr ng-repeat-start="item in LootService.lootPile">
          <td>{{item.quantity}}</td>
          <td>{{item.name}}</td>
          <td>{{item.value | coins}}</td>
          <td>{{item.value * item.quantity | coins}}</td>
        </tr>
        <tr ng-repeat-end ng-if="item.details || item.notes">
          <td colspan="5"><i ng-if="item.details">{{item.details}}</i><p ng-if="item.notes">{{item.notes}}</p></td>
        </tr>
      </tbody>
    </table>
    <footer>Automatically generated by LootSplit</footer>
  </div>
  <div ng-if="charPages" ng-repeat="char in characters">
    <h1 ng-if="sepPages || $first">LootSplit Results</h1>
    <hr>
    <h1>{{char.name}}</h1>
    <h4 ng-if="char.player">{{char.player}}</h4>
    <h4> Currency: {{char.lootCoins | coins }} </h4>
    <table class="table">
      <thead>
        <td>#</td>
        <td>Item</td>
        <td>Value</td>
        <td>Total Value</td>
        <td>Running Value</td>
      </thead>
      <tbody>
        <tr ng-repeat-start="item in char.loot">
          <td>{{item.quantity}}</td>
          <td>{{item.name}}</td>
          <td>{{item.value | coins}}</td>
          <td>{{item.value * item.quantity | coins}}</td>
          <td>{{ char.loot | subtotal : $index | coins}}</td>
        </tr>
        <tr ng-repeat-end ng-if="item.details || item.notes">
          <td colspan="5"><i ng-if="item.details">{{item.details}}</i><p ng-if="item.notes">{{item.notes}}</p></td>
        </tr>
        <tr ng-if="char.loot.length">
          <td colspan="3"></td><td>Total</td><td>{{ char.loot | subtotal : char.loot.length - 1 | coins}}</td>
        </tr>
      </tbody>
    </table>
    <div class="clearfix">
      <span class="pull-right">Deviation: {{LootService.characterDifferences[LootService.slugify(char.name)] | coins}}</span><br>
      <span class="pull-right">Average Deviation: {{LootService.avgCharacterDifference | coins}}</span><br>
      <span class="pull-right"><h2>Total Take: {{ LootService.characterTotals[LootService.slugify(char.name)] | coins }}</h2></span><br>
    </div>
    <footer ng-if="sepPages && !$last">Automatically generated by LootSplit</footer>
    <span ng-if="$last">Automatically generated by LootSplit</span>
  </div>

</div>
